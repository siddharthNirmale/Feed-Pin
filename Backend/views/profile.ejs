<% include ./partials/header.ejs %>

  <div class="profile w-full h-screen bg-zinc-800 text-white">

    <form action="/fileupload" id="uploadForm" method="POST" enctype="multipart/form-data" hidden>

      <input type="file" name="image">
      <button type="submit">Upload</button>
    </form>


    <div class="profdets flex flex-col items-center justify-center pt-20 space-y-3">
      <div class="relative">
        <span id="uploadIcon"
          class="absolute ml-20 mt-20 text-4xl text-white cursor-pointer rounded-full bg-black/50 p-2 hover:bg-black/70">
          <i class=" ri-edit-circle-line"></i>
        </span>
        <div class="w-32 h-32 bg-blue-200 rounded-full overflow-hidden">
          <img class="object-cover" src="/images/uploads/<%= user.profileImage %>" alt="">
        </div>
      </div>
      <h1 class="text-3xl font-semibold mt-3 mb-1">
        <%= user.name %>
      </h1>
      <h3 class=" text-md ">@<%= user.username %>
      </h3>
      <a href="/edit"
        class="px-7 py-2 bg-zinc-600 rounded-full mt-3 inline-block font-semibold text-white text-sm font-semibold">Edit
        Profile

      </a>
      <a href="/add"
        class="px-7 py-2 bg-red-600 rounded-lg mt-10 inline-block font-semibold text-white text-sm font-semibold">
        Add New Post</a>
      <div class="cards flex flex-wrap items-start mt-10 gap-5 px-10">


        <div class="card">
          <div class="w-40 h-50 bg-zinc-700 rounded-xl overflow-hidden  ">
            <img class="object-cover w-full h-full" src="/images/uploads/<%= user?.posts[0]?.image %>" alt="">

          </div>
          <a href="/show/posts" class="text-xl inline-block  font-semibold mt-3 ">
            Your Uploaded Pins
          </a>
          <h5 class="text-md font-medium opacity-50">
            <%= user?.posts.length %> Pins
          </h5>
        </div>



        <script>
          document.querySelector('#uploadIcon').addEventListener('click', function () {
            document.querySelector("#uploadForm input[type='file']").click();
          });

          document.querySelector("#uploadForm input[type='file']").addEventListener('change', function () {
            document.querySelector("#uploadForm").submit();
          });

        </script>


        <% include ./partials/footer.ejs %>